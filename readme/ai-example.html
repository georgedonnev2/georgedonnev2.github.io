<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>在开发套件上运行一些样例</title>


    <link rel="stylesheet" href="./css/jnstyle.css">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
        rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css"
        rel="stylesheet" />
</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js">
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js">
    </script>

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js">
        </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js">
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/show-language/prism-show-language.min.js">
    </script>

    <script src=" https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js">
    </script>

    <header>
        <h1>在开发套件上运行一些样例</h1>
        <p>by George Donne</p>
        <p>&nbsp&nbsp|&nbsp&nbsp</p>
        <p>Last update on 2024-06-19</p>
        <p>&nbsp&nbsp|&nbsp&nbsp</p>
        <p>Released on 2024-06-19</p>
        <br /><a href="./ai-home.html">返回AI-HOME</a>
    </header>

    <main>

        <section>
            <h2 id="测试USB摄像头">
                <a href="#测试USB摄像头">测试USB摄像头</a>
            </h2>

            <p>目录结构：</p>
            <pre><code class="lang-sh">camera
├── build
├── CMakeLists.txt
└── src
    └── testv.cpp</code></pre>

            <p>CMakeList.txt 内容如下：</p>

            <pre><code class="lang-sh">~/camera$ cat CMakeLists.txt
cmake_minimum_required(VERSION 3.0)
project(camera )
find_package( OpenCV REQUIRED )
include_directories( ${OpenCV_INCLUDE_DIRS} )
add_executable( demo src/testv.cpp )
target_link_libraries( demo ${OpenCV_LIBS} )</code></pre>

            <p>testv.cpp 的内容如下：</p>
            <pre><code class="lang-cpp line-numbers" >#include &ltopencv2/opencv.hpp&gt
using namespace cv;
using namespace std;

int main()
{
        cout << "open camera..." << endl;
	VideoCapture capture(0);
	cout << "camera opened." << endl;

	while (1)
	{
		Mat frame;
		capture >> frame;
		imshow("读取视频帧", frame);
		waitKey(30);
	}

	system("pause");
	return 0;
}
                      
//原文链接：https://blog.csdn.net/qq_43279579/article/details/109289755
//g++ test.cpp -o test `pkg-config --cflags --libs opencv`</code></pre>

<p>进入 build 目录，执行 cmake ..</p>

<pre><code class="lang-sh">~/camera/build$ cmake ..
-- The C compiler identification is GNU 11.4.0
-- The CXX compiler identification is GNU 11.4.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found OpenCV: /usr/local (found version "4.10.0") 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/gdv2/camera/build</code></pre>

<p>再执行 make 命令</p>
<pre><code class="lang-sh">~/camera/build$ make
[ 50%] Building CXX object CMakeFiles/demo.dir/src/testv.cpp.o
[100%] Linking CXX executable demo
[100%] Built target demo</code></pre>

<p>运行程序 demo</p>
<pre><code class="lang-sh">~/camera/build$ ./demo
open camera...
camera opened.
</code></pre>

<p>如果无法打开摄像头，通常是因为权限不足。可通过以下命令增加权限，即可。</p>
<pre><code class="lang-sh">~/camera/build$ ls -l /dev/video0
crw-rw----+ 1 root video 81, 0 Jun 19  2024 /dev/video0
~/camera/build$ sudo chmod o+rw /dev/video0
~/camera/build$ ls -l /dev/video0
crw-rw-rw-+ 1 root video 81, 0 Jun 19  2024 /dev/video0</code></pre>

<p>可在console上执行，以方便打开图形界面。</p>
<p>如需要远程访问并打开图形终端，请参考：<a href="./ai-ssh-gui.html">通过 SSH 访问 Linux 主机并打开图形界面</a></p>
        </section>

        <section>
            <h2 id="主要参考资料">
                <a href="#主要参考资料">主要参考资料</a>
            </h2>
            <ul>
                <li>
                    <a href="https://blog.csdn.net/qq_43279579/article/details/109289755" target="_blank">Ubuntu上使用opencv——摄像头的相关使用</a>
                </li>
            </ul>
        </section>
    </main>

    <footer>
        <p>
            <a href="./ai-home.html">返回AI-HOME</a>
        </p>
    </footer>
</body>

</html>