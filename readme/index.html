<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <title>Personal Website of George Donne</title>
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css" />
    -->
    <!--
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script>hljs.highlightAll();</script>
-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="jnstyle1.css">

</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>

    <script
        src=" https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <header>
        <h1>某某管理系统Web界面开发指南</h1>
    </header>

    <main>

        <h2>前言</h2>
        <p>
            学生信息管理系统/图书馆信息管理系统/……等信息管理系统，是被广泛使用的、和数据库技术结合的信息管理系统。一个信息管理系统，需要有人机交互界面，供用户、系统管理员等使用，实现和提供信息的增删改查等核心能力和功能。人机交互界面有很多种形式，以及很多种技术实现方式。在当今互联网高速发展时代，在人们日常生活中出现较多的人机交互界面有手机App界面、微信等小程序界面、个人电脑/Pad等Web界面，等。
        </p>
        <p>
            本指南选取日常生活中出现较多的Web界面，提供相关的开发指南建议，用于某某信息管理系统。Web界面通常在个人电脑、Pad上使用，在手机上也可以使用。
        </p>
        <p>
            Web界面开发有很多方式。本指南选取基本的“三件套”方式，即 html + css + javascript。本指南适合于没有开发过 Web 界面的同学，将从零开始，一步步实现用于某某信息管理系统的 Web 界面。
        </p>

        <h2>初认Web页面/界面</h2>
        <h3>Hello World -- html</h3>
        <p>
            按惯例，总是先写一个 Hello World! 程序，虽然 html 不是编程语言。
        </p>


        <pre><code class="language-html">&lt!DOCTYPE html&gt
&lthtml&gt
    &lthead&gt
        &ltmeta charset="utf-8"&gt
        &lttitle&gtPersonal Website of George Donne&lt/title&gt
    &lt/head&gt
    &ltbody&gt
        &lth1&gtMy First Web Page&lt/h1&gt
        &ltp&gtHello World!&lt/p&gt
    &lt/body&gt
&lt/html&gt</code></pre>


        <h3>一个基本界面 -- html + css</h3>
        <p>（待细化优化内容）</p>
        <p>
            对于某某信息管理系统，查询是使用很频繁的功能。仿照百度或Google首页，用html写一个基本界面。参考代码如下：
        </p>
        <em>（待补充参考代码）</em>
        <p>
            使用css调整和优化界面的显示，让界面看上去和百度/Google类似。参考代码如下：
        </p>
        <em>（待补充参考代码）</em>


        <h3>显示查询得到信息的界面 -- html + css + javascript</h3>
        <p>（待细化优化内容）</p>
        <p>
            比如根据学号查询学生信息。不同学生的信息都不同，比如姓名、性别、手机等。JavaScript是一门编程语言，初步实现设想是：
        <ul>
            <li>在界面上输入查询提交。比如要查询的学号。</li>
        </ul>
        </p>

        <!---->
        <h2>
            Web界面架构设计和搭建
        </h2>

        <h3>界面交互流程设想</h3>
        <ul>
            <li>在浏览器地址栏输入网址并回车，浏览器显示网站首页，中间有个查询输入框，输入学号按查询按钮可以查询学生信息。</li>
            <li>点击网站首页右上方导航栏中的新增，出现新增页面，输入相关信息后，点击提交按钮，可新增一个学生的相关信息。</li>
            <li>更新、删除，也是类似。</li>
        </ul>
        感觉要写个web服务端程序，处理浏览器发来的增删改查等请求，并将处理结果一html网页形式返回给浏览器，浏览器显示给用户/管理员。只是写几个html页面，按一定逻辑顺序在这几个html页面之间调转，应无法实现某某信息管理系统的web界面。或者硬写业可能可以，但应该比较无趣。主要原因是部分html页面展示的内容不是固定的。

        <h3 id="一些预备知识">
            <a href="#一些预备知识">
                一些预备知识
            </a>
        </h3>
        <p>有兴趣的同学可以快速浏览以下几篇文章，做到知晓就可以了。文章中的更多链接，可以今后再点击查看，先快速浏览文章本身内容。</p>
        <ul>
            <li>
                <a
                    href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/First_steps/Introduction">服务端编程介绍</a>
            </li>
            <li>
                <a
                    href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/First_steps/Client-Server_overview">客户端服务端交互概述</a>
            </li>
            <li>
                <a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/First_steps/Web_frameworks">服务端
                    web框架</a>
            </li>
        </ul>

        <h3>
            在Windows或macOS上安装 Node 和 NPM
        </h3>

        <p>
            在 Windows 和 macOS 上安装 Node 和 NPM 非常简单明了，使用现成的安装包就行了：
        </p>
        <ul>
            <li>下载安装包：</li>
            <ul>
                <li>访问 <a href="https://nodejs.org/zh-cn/">https://nodejs.org/zh-cn/</a></li>
                <li>左侧按钮上写着“推荐多数用户使用（LTS）”，点击下载。</li>
            </ul>
            <li>双击下载的安装包，按照提示即可安装。</li>
        </ul>
        <p>检查 Node 是否成功安装的最简单方法就是在终端（或命令行）中运行 "version" 命令，看是否返回版本号字符串。NPM 应该与 Node.js 一同成功安装，可以使用同样的方法来测试一下。以下是macOS
            zsh为例：</p>


        <pre><code class="lang-shell">% node -v 
v20.12.2
% npm -v
10.5.0</code></pre>

        <h3 id="创建_Hello_World_网站">
            <a href="#创建_Hello_World_网站">
                创建 Hello World 网站
            </a>
        </h3>
        <p>新建目录 appdemo，并在该目录下创建 helloworld.js，内容如下：</p>
        <pre><code class="lang-javascript">// 加载 HTTP 模块
const http = require("http");
const hostname = "127.0.0.1";
const port = 3000;

// 创建 HTTP 服务器
const server = http.createServer((req, res) => {
    // 用 HTTP 状态码和内容类型（Content-Type）设置 HTTP 响应头
    res.statusCode = 200;
    res.setHeader("Content-Type", "text/plain");

    // 发送响应体
    res.end("Hello World!\n");
});

// 监听 3000 端口的请求，注册一个回调函数记录监听开始
server.listen(port, hostname, () => {
    console.log(`服务器运行于 http://${hostname}:${port}/`);
});</code></pre>
        <p>在命令行工具中进入 helloworld.js 文件所在的目录，输入“node + 文件名”并运行，服务器就启动了：</p>
        <pre><code class="lang-javascript">~/appdemo % node helloworld
服务器运行于 http://127.0.0.1:3000/</code></pre>
        <p>在浏览器中访问这个 URL <a href="http://127.0.0.1:3000/">http://127.0.0.1:3000/</a> 或 <a
                href="http://localhost:3000/">http://localhost:3000/</a>，如果一切正常，浏览器会直接显示出 "Hello World!" 字符串。</p>
        <section>
            <!-- 用 Express 框架创建 Hello World 网站 -->
            <h3 id="创建_Hello_World_网站_express">
                <a href="#创建_Hello_World_网站_express">
                    用 Express 框架创建 Hello World 网站
                </a>
            </h3>
            <p>进入创建的appdemo目录，执行 npm init初始化项目。此命令将要求你输入几个参数，例如此应用的名称和版本。 你可以直接按“回车”键接受大部分默认设置即可，下面这个除外：</p>
            <pre><code class="lang-sh">entry point: (index.js) # 当前目录如有js文件，则可能显示js文件如helloworld.js。</code></pre>

            <p>键入 appdemo.js 或者你所希望的名称，这是当前应用的入口文件。如果你希望采用默认的 index.js 文件名，只需按“回车”键即可。</p>



            <pre><code class="lang-sh">~/appdemo % npm init
                
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See `npm help init` for definitive documentation on these fields
and exactly what they do.

Use `npm install <pkg>` afterwards to install a package and
save it as a dependency in the package.json file.

Press ^C at any time to quit.
package name: (appdemo) 
version: (1.0.0) 1.1.1
description: app demo for student information management
entry point: (helloworld.js) appdemo.js
test command: 
git repository: 
keywords: 
author: George Donne
license: (ISC) 
About to write to /appdemo/package.json:

{
  "name": "appdemo",
  "version": "1.1.1",
  "description": "app demo for student information management",
  "main": "appdemo.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "George Donne",
  "license": "ISC"
}


Is this OK? (yes) y</code></pre>

            <p>在vscode中查看生成的package.json，或者输入如下cat命令查看</p>
            <pre><code class="lang-bash">~/appdemo % cat package.json</code></pre>
            <p>以下是package.json的内容：</p>
            <pre><code class="lang-json">{
    "name": "appdemo",
    "version": "1.1.1",
    "description": "app demo for student information management",
    "main": "appdemo.js",
    "scripts": {
      "test": "echo \"Error: no test specified\" && exit 1"
    },
    "author": "George Donne",
    "license": "ISC"
}</code></pre>

            <p>执行 npm install express --save，在当前目录（appdemo）下安装 Express。</p>

            <pre><code class="lang-sh">~/appdemo % npm install express --save
added 64 packages, and audited 65 packages in 9s

12 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities</code></pre>
            <em>连接学校网络似乎不能安装。可尝试连接其他网络，比如电信手机做热点。</em>

            <p>在当前目录下新建 helloworld-express.js，文件内容如下：</p>

            <pre><code class="lang-javascript">const express = require("express");
const app = express();

app.get("/", (req, rsq) => {
    rsq.send("Hello World!");
});

app.get("/user/:id", (req, rsq) => {
    rsq.send("Hello " + req.params.id + " !");
});

app.listen(8000, () => {
    console.log("示例程序正在监听 8000 端口！");
});</code></pre>
            <p>输入“node + 文件名”并运行，服务器就启动了：</p>
            <pre><code class="lang-javascript">~/appdemo % node helloworld-express
示例程序正在监听 8000 端口！</code></pre>
            <p>在浏览器中输入不同的URL，观察浏览器的输出的变化：</p>
            <ul>
                <li>在浏览器中访问这个 URL <a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a> 或 <a
                        href="http://localhost:8000/">http://localhost:8000/</a>，如果一切正常，浏览器会直接显示出 "Hello World!" 字符串。
                </li>
                <li>在浏览器中访问这个 URL <a href="http://127.0.0.1:8000/user/george">http://127.0.0.1:8000/user/george</a> 或 <a
                        href="http://localhost:8000/user/george">http://localhost:8000/user/george</a>，如果一切正常，浏览器会直接显示出
                    "Hello george !" 字符串。将URL中的george改成其他比如张三，则浏览器得到显示"Hello 张三 !" 字符串</li>
            </ul>
            <p>可以看到：在浏览器中输入不同的URL，可以得到不同的显示。这正是所需要的。</p>
        </section>

        <!---->
        <section>

            <h3 id="生成Web界面应用的框架">
                <a href="#生成Web界面应用的框架">生成Web界面应用的框架</a>
            </h3>

            <p>Express 应用生成器工具（express-generator）可以生成一个 Express 应用的“框架”。然后在该框架上做修改，就可以快速完成某某信息管理系统的Web界面。</p>

            <p>执行 npx express-generator --view=pug，安装express应用生成器工具，并指定模板引擎是pug。</p>
            <pre><code class="lang-sh">~/appdemo % npx express-generator --view=pug
destination is not empty, continue? [y/N] y

   create : public/
   create : public/javascripts/
   create : public/images/
   create : public/stylesheets/
   create : public/stylesheets/style.css
   create : routes/
   create : routes/index.js
   create : routes/users.js
   create : views/
   create : views/error.pug
   create : views/index.pug
   create : views/layout.pug
   create : app.js
   create : package.json
   create : bin/
   create : bin/www

   install dependencies:
     $ npm install

   run the app:
     $ DEBUG=appdemo:* npm start</code></pre>

            <p>根据 npx express-generator --view=pug 命令执行结果中的提示，执行 npm install 安装依赖（install dependencies）。</p>

            <pre><code class="lang-sh">/appdemo % npm install
npm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due tothe number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause aslowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgradeyour dependencies to the actual version of core-js.

added 71 packages, removed 4 packages, changed 20 packages, and audited 132 packages in 16s

13 packages are looking for funding
  run `npm fund` for details

7 vulnerabilities (2 low, 5 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues, run:
  npm audit fix --force

Run `npm audit` for details.</code></pre>

            <p>根据 npx express-generator --view=pug 命令执行结果中的提示，执行 DEBUG=appdemo:* npm start。</p>
            <pre><code class="lang-sh">
/appdemo % DEBUG=appdemo:* npm start

> appdemo@0.0.0 start
> node ./bin/www

  appdemo:server Listening on port 3000 +0ms
GET / 200 459.436 ms - 170
GET /stylesheets/style.css 200 5.110 ms - 111
GET /favicon.ico 404 14.436 ms - 1202</code></pre>

            <p>打开浏览器并访问 <a href="http://127.0.0.1:3000/">http://127.0.0.1:3000/</a> 将看到 Express 的默认欢迎页面。</p>
            <img src="img/express-welcome.png" width="30%" />

        </section>

        <!--小结-搭建骨架子-->
        <section>
            <h3 id="架构骨架子搭建小结">
                <a href="#架构骨架子搭建小结">架构/骨架子搭建小结</a>
            </h3>
            <p>至此，Web界面应用的骨架子终于有了。接下来：</p>
            <ul>
                <li>填充真实内容到骨架子中，让骨架子更接近真实更饱满。</li>
                <li>操作数据库，显示真实数据。</li>
                <li>美化Web界面，取得高大上视觉效果。</li>
            </ul>
        </section>

        <h2 id="修改完善Web服务器框架">
            <a href="#修改完善Web服务器框架">修改完善Web服务器框架</a>
        </h2>

        <!--安装nodemon-->
        <section>
            <h3 id="安装nodemon">
                <a href="#安装nodemon">安装nodemon提升开发效率</a>
            </h3>

            <p>接下来会频繁修改完善框架。只有重启服务器才能看到 Express 网站所做的改动。每次改动后手动启停服务器实在太烦人了，有必要花点时间让这项工作自动化。nodemon 是最简便的自动化工具之一。执行 npm
                install --save-dev nodemon 安装nodemon。</p>
            <pre><code class="lang-sh">/appdemo % npm install --save-dev nodemon

added 29 packages, and audited 161 packages in 8s

17 packages are looking for funding
  run `npm fund` for details

7 vulnerabilities (2 low, 5 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues, run:
  npm audit fix --force

Run `npm audit` for details. </code></pre>

            <p>找到 package.json 的 scripts 部分。在 "start" 一行的末尾添加逗号，并在新的一行中添加 "devstart"，如下所示：</p>
            <pre><code class="lang-json">"scripts": {
    "start": "node ./bin/www",
    "devstart": "nodemon ./bin/www"
},</code></pre>
            <p>后续将执行 DEBUG=appdemo:* npm run devstart 启动web服务器。</p>
            <pre><code class="lang-sh">/appdemo % DEBUG=appdemo:* npm run devstart

> appdemo@0.0.0 devstart
> nodemon ./bin/www

[nodemon] 3.1.0
[nodemon] to restart at any time, enter `rs`
[nodemon] watching path(s): *.*
[nodemon] watching extensions: js,mjs,cjs,json
[nodemon] starting `node ./bin/www`
  appdemo:server Listening on port 3000 +0ms</code></pre>
        </section>

        <!--进一步细化确定Web页面交互流程-->
        <section>
            <h3 id="进一步细化确定Web页面交互流程">
                <a href="#进一步细化确定Web页面交互流程">进一步细化确定Web页面交互流程</a>
            </h3>

            <p><strong><ins>查询信息</ins></strong>的主要交互流程：</p>
            <ol>
                <li>在浏览器输入 <a href="http://localhost:3000">http://localhost:3000</a>。</li>
                <li>Web服务器收到请求后，返回某某信息管理系统的主页面。页面中有输入框，可以输入学号查询学生信息。</li>
                <li>用户在输入框输入学号，点击查询按钮，发送 HTTP-GET 请求，URL是 http://localhost:3000/student/get?jnuid=1234。其中 jnuid=1234
                    表示要查询学号是 1234 的同学的详细信息。 </li>
                <li>Web后台服务器收到请求后，查询数据库，得到学号 1234 同学的详细信息，并将信息以 Web页面方式返回浏览器，展示给用户。</li>
            </ol>
            <p>关于学生的详细信息的Web页面，主要内容有：</p>
            <ul>
                <li>学号、性别、姓名、电话，等等。以及相关课程的成绩。</li>
                <li>详细信息Web页面底部，有 Delete 链接。点击后，可从数据库中删除该学生的记录。</li>
                <li>详细信息Web页面底部，有 Update 链接。点击后，可更新该学生在数据库中的信息。</li>
            </ul>
            <hr />
            <p><strong><ins>新增学生</ins></strong>的主要交互流程：</p>
            <ol>
                <li>点击主页面导航栏的<ins>新增</ins>选项，向Web服务器发送 HTTP-GET请求，URL是 http://localhost:3000/student/create。</li>
                <li>Web服务器收到请求后，返回新增信息的Web页面。用户输入相关信息后点击页面上的提交按钮，向Web服务器发送 HTTP-POST 请求，URL还是
                    http://localhost:3000/student/create。</li>
                <li>Web后台服务器收到POST请求后，将相关信息写入数据库，并返回学生详细信息（刚刚写入数据库的那个学生）页面给浏览器。</li>
            </ol>

            <p>关于新增学生的Web页面，主要内容有：</p>
            <ul>
                <li>有若干输入框，供输入学号、性别、姓名、电话，等等。</li>
                <li>Web页面上有提交按钮。</li>
            </ul>
            <hr />
            <p><strong><ins>删除学生</ins></strong>的主要交互流程：</p>
            <ol>
                <li>简化起见，仅提供从查询得到的学生详情页面底部的删除链接，进行删除操作。点击学生详情页面底部的删除链接，向Web服务器发送 HTTP-POST请求，删除该学号的学生信息，URL是
                    http://localhost:3000/student/delete。</li>
                <li>Web后台服务器收到POST请求后，从数据库中删除该学号的学生信息。操作完成后，返回删除成功等信息给浏览器。</li>
            </ol>
            <hr />
            <p><strong><ins>更新学生</ins></strong>的主要交互流程：</p>
            <ol>
                <li>简化起见，仅提供从查询得到的学生详情页面底部的更新链接，进行更新操作。点击学生详情页面底部的更新链接，向Web服务器发送 HTTP-GET请求，要求更新该学号的学生信息，URL是
                    http://localhost:3000/student/update。</li>
                <li>Web服务器收到请求后，返回类似新增信息的Web页面，只是相关输入框已填充了该学号的学生的现有信息。用户更改相关信息后点击页面上的提交按钮，向Web服务器发送 HTTP-POST 请求，URL还是
                    http://localhost:3000/student/update。</li>
                <li>Web后台服务器收到POST请求后，将相关信息写入数据库，并返回学生详细信息（刚刚更新写入数据库的那个学生）页面给浏览器。</li>
            </ol>
        </section>

        <!--Web服务框架简介--路由-->
        <section>
            <h3 id="Web服务框架简介_路由">
                <a href="#Web服务框架简介_路由">Web服务框架简介--路由</a>
            </h3>
            <p>先了解下Web服务框架的内容，以便做相应修改完善。只简介要修改的部分。</p>
            <p>以下是目录 appdemo 中相关文件：</p>
            <pre><code class="lang-sh">app.js
./bin
./node_modules
package-lock.json
package.json
./public
./routes
    index.js
    users.js
./views
    error.pug
    index.pug
    layout.pug

# 以下是前面测试使用的2个文件，最终Web服务器框架中不会使用到
helloworld-express.js
helloworld.js</code></pre>
            <p>路由就是定义不同的URL该如何处理。在框架中是由 app.js 中路由相关代码，和 routes 目录中 js 文件共同定义的。</p>
            <p>以下是 app.js 中和路由相关的代码片段：</p>
            <pre><code class="lang-javascript">var indexRouter = require('./routes/index');
var usersRouter = require('./routes/users');

// some other codes...

app.use('/', indexRouter);
app.use('/users', usersRouter);</code></pre>

            <p>以下是 ./routes/users.js 的代码。其中 / 路由是框架中现有的，/cool 路由是新增的，为了便于理解路由是怎么工作的。<br />
                路由文档 /routes/users.js 如下所示。首先加载 express 模块 并获取 express.Router 对象（命名为router）。然后为 router 指定路由，最后导出
                router（就可以导入 app.js 了）。<br />
                该路由定义了一个回调，在检测到正确模式的 HTTP GET 请求时将调用该回调。正确模式即导入模块时指定的路由（'/users'）加该模块（'/'）中定义的任何内容。换句话说，在收到 /users/ URL
                时使用此路由。</p>
            <pre><code class="lang-javascript">var express = require('express');
var router = express.Router();

/* GET users listing. */
router.get('/', function (req, res, next) {
    res.send('respond with a resource');
});

// GET users/cool.
router.get('/cool', function (req, rsp, next) {
    rsp.send("I'm George, I'm cool!");
});

module.exports = router;</code></pre>

            <p>以下是 ./routes/index.js 中和路由相关的代码片段。其中 / 路由是框架中现有的，/about 路由是新增的，为了便于理解路由是怎么工作的。</p>
            <pre><code class="lang-javascript">/* GET home page. */
router.get('/', function (req, res, next) {
    res.render('index', { title: 'Express' });
});

// GET about page. 
router.get('/about', function (req, rsp, next) {
    rsp.send('This is about page.');
});</code></pre>

            <p>可以对路由做相关测试，以便加深了解。在浏览器中输入不同的 URL，将得到不同的结果，如下：</p>
            <ul>
                <li>输入 <a href="http://localhost:3000/">http://localhost:3000/</a>，得到结果：Express Welcome to
                    Express。res.render('index', { title: 'Express' }) 使用到了页面模版，由第一个参数指定模版是 ./views/index.pug。将在下个章节做简介。
                </li>
                <li>输入 <a href="http://localhost:3000/about">http://localhost:3000/about</a>，得到结果：This is about page.
                </li>
                <li>输入 <a href="http://localhost:3000/users">http://localhost:3000/users</a>，得到结果：respond with a
                    resource</li>
                <li>输入 <a href="http://localhost:3000/users/cool">http://localhost:3000/users/cool</a>，得到结果：I'm George,
                    I'm cool!
                </li>
            </ul>
        </section>

        <!--修改为真实的路由-->
        <section>
            <h3 id="修改为真实的路由">
                <a href="#修改为真实的路由">修改为真实的路由</a>
            </h3>

            <p>定义路由之前应先使用单独的“控制器”模块创建回调的结构骨架。（文件/模块结构没有限制，但以下结构很适合当前项目的规模）。</p>
            <p>说明：采用 MVC（Models + Views + Controllers）方式实现，代码结构比较清晰，也相对容易扩展。由于时间关系对 Models 理解不深，因而此处的 Controllers 实际上是
                Controllers + Models 混在一起了。Views 就是对应页面模版。</p>
            <p>新建目录 controllers，并在 controllers 目录下新建 studentController.js，定义路由的回调函数（即具体做的事情）。内容如下：</p>
            <p>在 routes 目录下新建 student.js，创建 student 相关的完整路由。内容如下：</p>
            <pre><code class="lang-javascript">const express = require("express");
const router = express.Router();

// 导入控制器模块
const student_controller = require("../controllers/studentController");

// GET 主页面
router.get("/", student_controller.index);

// GET 获取学生信息
router.get("/get", student_controller.student_get);

// 新增学生信息，先 GET 请求后获得填写信息的页面。信息填写好后按提交按钮，发送 POST 请求。
router.get("/create", student_controller.student_create_get);
router.post("/create", student_controller.student_create_post);

// 删除学生信息，先 GET 请求后获得学生信息。按提交按钮，发送 POST 请求删除。
router.get("/delete/:id", student_controller.student_delete_get);
router.post("/delete/:id", student_controller.student_delete_post);

// 更新学生信息，先 GET 请求后获得填写信息的页面。信息填写好后按提交按钮，发送 POST 请求。
router.get("/update/:id", student_controller.student_update_get);
router.post("/update/:id", student_controller.student_update_post);

module.exports = router;</code></pre>

            <p>在 app.js 增加如下 2 行 studentRouter 相关的，让 student.js 定义的路由起作用。</p>
            <pre><code class="lang-javascript">var indexRouter = require('./routes/index');
var usersRouter = require('./routes/users');
var studentRouter = require('./routes/student'); // routes for student related request
       
// some other codes...

app.use('/', indexRouter);
app.use('/users', usersRouter);
app.use('/student', studentRouter); // realted url will be ip+port followed by /student. e.g. http://localhost:3000/student, http://localhost:3000/student/get, etc.</code></pre>


            <p>index.js 也微调如下。当输入 URL 为 localhost:3000 或 localhost:3000/index.html，会当做 localhost:3000/student
                处理的。即被重定向（redirect）到 /student。</p>
            <pre><code class="lang-javascript">/* GET home page. */
router.get('/', function (req, res, next) {
    //res.render('index', { title: 'Express' });
    res.redirect("/student"); // redirect to ip+port/student if get request by ip+port.
});
    
router.get('/index.html', function (req, res, next) {
    res.redirect("/student"); // redirect to ip+port/student if get request by ip+port/index.html.
});</code></pre>
<p>至此，真实路由已定义好了。小结如下：<br/><em>（ip和端口号，以 localhost:3000为例）</em></p>
<ul>
    <li><a href="http://localhost:3000/student">http://localhost:3000/student</a>，发送 GET 请求，获取主页面。</li>
    <li><a href="http://localhost:3000/student/get">http://localhost:3000/student/get</a>，发送 GET 请求，查询学生信息。</li>
    <li><a href="http://localhost:3000/student/create">http://localhost:3000/student/create</a>，发送 GET 请求，新建学生信息。Web服务器收到请求后将返回页面用于填写信息。</li>
    <li><a href="http://localhost:3000/student/create">http://localhost:3000/student/create</a>，发送 POST 请求，新建学生信息。Web服务器收取请求后将把新增学生的信息写入数据库。</li>
    <li><a href="http://localhost:3000/student/delete/1234">http://localhost:3000/student/delete/1234</a>，发送 GET 请求，删除学生信息。Web服务器收到请求后，将返回页面要求确认是否删除。/delete/:id 是指在 URL 中delete后面跟随学号，此处以学号 1234 为例。下同。</li>
    <li><a href="http://localhost:3000/student/delete/1234">http://localhost:3000/student/delete/1234</a>，发送 POST 请求，删除学生信息。Web服务器收到请求后，将会从数据库中删除学生的信息。</li>
    <li><a href="http://localhost:3000/student/update/1234">http://localhost:3000/student/update/1234</a>，发送 GET 请求，更新学生信息。Web服务器收到请求后，将返回页面用于编辑学生信息。/update/:id 是指在 URL 中 update 后面跟随学号，此处以学号 1234 为例。下同。</li>
    <li><a href="http://localhost:3000/student/update/1234">http://localhost:3000/student/update/1234</a>，发送 POST 请求，更新学生信息。Web服务器收到请求后，将把更新的学生信息写入数据库。</li>
</ul>
        </section>



        <h2>试试数据库的增删改查CRUD</h2>


        <h2 id="tosw">
            附录--相关软件/软件包安装
        </h2>


        <h3>
            编辑器--Visual Studio Code
        </h3>
        <p>
            要编写程序（虽然 html 不是编程语言，只是标记语言）总需要一款适合自己的编辑器软件，比如能够高亮显示编程语言的保留字，比如可以排版 html 文件（就是全文按层级统一缩进4个空格之类的）。推荐安装 Visual
            Studio Code 作为编辑器。其他编辑器也是可以的，只要适合自己就好。
        </p>
        <p>
            <a href="https://code.visualstudio.com/Download">Visual Studio Code 官网下载地址</a>
            说明：
        <ul>
            <li>安装过程不复杂，在此不赘述。</li>
            <li>学院网络似乎不能访达该网址。可尝试切换其他网络，或从其他网站下载安装包。</li>
        </ul>
        </p>

        <h3>JavaScript运行环境--Node.js</h3>
        <p>
            充当Web服务器。
        </p>
        <p>
            <a href="https://nodejs.org/">Node.js 官网下载地址</a>
            <br />
            说明：
        <ul>
            <li>安装过程不复杂，在此不赘述。</li>
            <li>安装完成后，可以尝试官网给出的 Create an HTTP Server 样例。</li>
        </ul>
        </p>

        <h3>
            其他软件包
        </h3>
        <p>
            其他软件包基本都是基于 Node.js 的插件。将在构建Web界面过程中按需安装。
        </p>

        <h2>
            附录--参考资料
        </h2>
    </main>

    <footer>
        &copy George Donne 2024-2025.
    </footer>

</body>

</html>